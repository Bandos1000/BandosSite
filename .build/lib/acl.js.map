{
  "version": 3,
  "sources": ["../../lib/acl.ts"],
  "sourcesContent": ["import { PageProps } from './types'\n\nexport async function pageAcl({\n  site,\n  recordMap,\n  pageId\n}: PageProps): Promise<PageProps> {\n  if (!site) {\n    return {\n      error: {\n        statusCode: 404,\n        message: 'Unable to resolve notion site'\n      }\n    }\n  }\n\n  if (!recordMap) {\n    return {\n      error: {\n        statusCode: 404,\n        message: `Unable to resolve page for domain \"${site.domain}\". Notion page \"${pageId}\" not found.`\n      }\n    }\n  }\n\n  const keys = Object.keys(recordMap.block)\n  const rootKey = keys[0]\n\n  if (!rootKey) {\n    return {\n      error: {\n        statusCode: 404,\n        message: `Unable to resolve page for domain \"${site.domain}\". Notion page \"${pageId}\" invalid data.`\n      }\n    }\n  }\n\n  const rootValue = recordMap.block[rootKey]?.value\n  const rootSpaceId = rootValue?.space_id\n\n  if (\n    rootSpaceId &&\n    site.rootNotionSpaceId &&\n    rootSpaceId !== site.rootNotionSpaceId\n  ) {\n    if (process.env.NODE_ENV) {\n      return {\n        error: {\n          statusCode: 404,\n          message: `Notion page \"${pageId}\" doesn't belong to the Notion workspace owned by \"${site.domain}\".`\n        }\n      }\n    }\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,eAAsB,QAAQ;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AACF,GAAkC;AANlC;AAOE,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,MACL,OAAO;AAAA,QACL,YAAY;AAAA,QACZ,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAEA,MAAI,CAAC,WAAW;AACd,WAAO;AAAA,MACL,OAAO;AAAA,QACL,YAAY;AAAA,QACZ,SAAS,sCAAsC,KAAK,yBAAyB;AAAA,MAC/E;AAAA,IACF;AAAA,EACF;AAEA,QAAM,OAAO,OAAO,KAAK,UAAU,KAAK;AACxC,QAAM,UAAU,KAAK;AAErB,MAAI,CAAC,SAAS;AACZ,WAAO;AAAA,MACL,OAAO;AAAA,QACL,YAAY;AAAA,QACZ,SAAS,sCAAsC,KAAK,yBAAyB;AAAA,MAC/E;AAAA,IACF;AAAA,EACF;AAEA,QAAM,aAAY,eAAU,MAAM,aAAhB,mBAA0B;AAC5C,QAAM,cAAc,uCAAW;AAE/B,MACE,eACA,KAAK,qBACL,gBAAgB,KAAK,mBACrB;AACA,QAAI,QAAQ,IAAI,UAAU;AACxB,aAAO;AAAA,QACL,OAAO;AAAA,UACL,YAAY;AAAA,UACZ,SAAS,gBAAgB,4DAA4D,KAAK;AAAA,QAC5F;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
